<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TwinMarket å­ªç”Ÿè‚¡å¸‚</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="index-page">
  <nav class="navbar-custom">
    <div style="max-width: 1400px; margin: 0 auto; padding: 0 2rem; width: 100%; display: flex; justify-content: space-between; align-items: center;">
      <div style="display: flex; align-items: center; gap: 2rem;">
        <a class="navbar-brand" href="#">TwinMarket å­ªç”Ÿè‚¡å¸‚</a>
        <select class="form-select-custom" id="modeSelect" style="min-width: 150px;">
          <option value="">é€‰æ‹©æ¨¡å¼</option>
          <option value="trade.html">ğŸ“Š äº¤æ˜“æ¨¡å¼</option>
          <option value="agent.html">ğŸ¤– Agentç®¡ç†</option>
          <option value="twin_market_2_skeuomorphic_news_console_prototype.html">ğŸ§ª å¸‚åœºæµ‹è¯•</option>
        </select>
      </div>
      <button class="btn-custom btn-outline-custom" onclick="window.location.href='https://hoder-zyf.github.io/TwinMarket/'">å…³äºæˆ‘ä»¬</button>
    </div>
  </nav>

  <div class="main-wrapper">
    <div class="content-container">

      <aside class="sidebar-custom">
        <h5>ğŸ’¼ æˆ‘çš„æŒä»“</h5>
        <div style="margin-bottom: 2rem;">
          <div class="holding-card">
            <div class="stock-symbol">AAPL</div>
            <div class="stock-name">è‹¹æœå…¬å¸</div>
            <div class="stock-quantity">100è‚¡ | <span class="ticker-up">+2.3%</span></div>
          </div>
          <div class="holding-card">
            <div class="stock-symbol">TSLA</div>
            <div class="stock-name">ç‰¹æ–¯æ‹‰</div>
            <div class="stock-quantity">50è‚¡ | <span class="ticker-down">-1.5%</span></div>
          </div>
        </div>

        <h5>ğŸš€ å¿«é€Ÿå¯¼èˆª</h5>
        <nav style="display: flex; flex-direction: column; gap: 0.5rem;">
          <button class="btn-custom btn-success-custom" onclick="window.location.href='trade.html'">
            ğŸ’° å¼€å§‹äº¤æ˜“
          </button>
          <button class="btn-custom btn-primary-custom" onclick="window.location.href='agent.html'">
            ğŸ¤– ä»£ç†ç®¡ç†
          </button>
          <button class="btn-custom btn-outline-custom" onclick="window.location.href='market-test.html'">
            ğŸ“ˆ åˆ†ææ¨¡å¼
          </button>
        </nav>
      </aside>

      <main class="main-content">
        <div class="stock-ticker">
          <div class="ticker-content">
            <span class="ticker-item ticker-up">ğŸ“ˆ ä¸Šè¯æŒ‡æ•° 3256.07 +1.2%</span>
            <span class="ticker-item ticker-up">ğŸ“ˆ æ·±è¯æˆæŒ‡ 10589.65 +0.8%</span>
            <span class="ticker-item ticker-up">ğŸ“ˆ åˆ›ä¸šæ¿æŒ‡ 2156.74 +1.5%</span>
            <span class="ticker-item ticker-down">ğŸ“‰ æ’ç”ŸæŒ‡æ•° 17865.34 -0.5%</span>
            <span class="ticker-item ticker-up">ğŸ“ˆ çº³æ–¯è¾¾å…‹ 13576.89 +2.1%</span>
            <span class="ticker-item ticker-up">ğŸ“ˆ æ ‡æ™®500 4512.34 +1.3%</span>
            <!-- é‡å¤å†…å®¹å®ç°æ— ç¼æ»šåŠ¨ -->
            <span class="ticker-item ticker-up">ğŸ“ˆ ä¸Šè¯æŒ‡æ•° 3256.07 +1.2%</span>
            <span class="ticker-item ticker-up">ğŸ“ˆ æ·±è¯æˆæŒ‡ 10589.65 +0.8%</span>
            <span class="ticker-item ticker-up">ğŸ“ˆ åˆ›ä¸šæ¿æŒ‡ 2156.74 +1.5%</span>
            <span class="ticker-item ticker-down">ğŸ“‰ æ’ç”ŸæŒ‡æ•° 17865.34 -0.5%</span>
            <span class="ticker-item ticker-up">ğŸ“ˆ çº³æ–¯è¾¾å…‹ 13576.89 +2.1%</span>
            <span class="ticker-item ticker-up">ğŸ“ˆ æ ‡æ™®500 4512.34 +1.3%</span>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1.5fr 1fr; gap: 2rem; margin-bottom: 2rem;">
          <div class="chart-container">
            <div class="card-header-custom">
              ğŸ“Š å¸‚åœºèµ°åŠ¿
              <select class="form-select-custom" style="width: 120px; font-size: 0.875rem;">
                <option>ä¸Šè¯æŒ‡æ•°</option>
                <option>æ·±è¯æˆæŒ‡</option>
                <option>åˆ›ä¸šæ¿æŒ‡</option>
              </select>
            </div>
            <canvas id="indexChart"></canvas>
          </div>

          <div class="card-custom">
            <div class="card-header-custom">
              ğŸ“° æœ€æ–°èµ„è®¯
            </div>
            <div id="newsList"></div>
          </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem;">
          <div class="card-custom">
            <div class="card-header-custom">
              ğŸ”¥ çƒ­é—¨ä¸ªè‚¡
            </div>
            <div id="hotStocks"></div>
          </div>

          <div class="forum-container">
            <div class="card-header-custom" style="margin-bottom: 1rem;">
              ğŸ’¬ å®æ—¶è®¨è®º
            </div>
            <div id="forum"></div>
          </div>
        </div>

        <div class="stock-ticker">
          <div class="ticker-content">
            <span class="ticker-item ticker-up">ğŸš€ æ¯”äºšè¿ª +4.2%</span>
            <span class="ticker-item ticker-down">ğŸ“‰ è´µå·èŒ…å° -2.1%</span>
            <span class="ticker-item ticker-up">ğŸš€ å®å¾·æ—¶ä»£ +3.5%</span>
            <span class="ticker-item ticker-up">ğŸš€ ä¸­å›½å¹³å®‰ +1.8%</span>
            <span class="ticker-item ticker-down">ğŸ“‰ è…¾è®¯æ§è‚¡ -1.3%</span>
            <span class="ticker-item ticker-up">ğŸš€ é˜¿é‡Œå·´å·´ +2.7%</span>
            <!-- é‡å¤å†…å®¹å®ç°æ— ç¼æ»šåŠ¨ -->
            <span class="ticker-item ticker-up">ğŸš€ æ¯”äºšè¿ª +4.2%</span>
            <span class="ticker-item ticker-down">ğŸ“‰ è´µå·èŒ…å° -2.1%</span>
            <span class="ticker-item ticker-up">ğŸš€ å®å¾·æ—¶ä»£ +3.5%</span>
            <span class="ticker-item ticker-up">ğŸš€ ä¸­å›½å¹³å®‰ +1.8%</span>
            <span class="ticker-item ticker-down">ğŸ“‰ è…¾è®¯æ§è‚¡ -1.3%</span>
            <span class="ticker-item ticker-up">ğŸš€ é˜¿é‡Œå·´å·´ +2.7%</span>
          </div>
        </div>
      </main>
    </div>
  </div>

  <script>
    document.getElementById("modeSelect").addEventListener("change", function() {
      if (this.value) window.location.href = this.value;
    });

    const ctx = document.getElementById('indexChart').getContext('2d');
    const gradient = ctx.createLinearGradient(0, 0, 0, 300);
    gradient.addColorStop(0, 'rgba(91, 102, 246, 0.4)');
    gradient.addColorStop(1, 'rgba(91, 102, 246, 0)');

    const labels = [];
    const data = [];
    const now = new Date();
    let currentValue = 3200;

    // ç”Ÿæˆè¿ç»­çš„å†å²æ•°æ®
    for (let i = 30; i >= 0; i--) {
      const time = new Date(now - i * 60000);
      labels.push(time.getHours().toString().padStart(2, '0') + ':' + time.getMinutes().toString().padStart(2, '0'));

      // æ¯ä¸ªç‚¹åŸºäºå‰ä¸€ä¸ªç‚¹è¿›è¡Œå°å¹…æ³¢åŠ¨
      const change = (Math.random() - 0.5) * 10;
      currentValue = Math.max(3150, Math.min(3250, currentValue + change));
      data.push(currentValue);
    }

    const indexChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [{
          label: 'æŒ‡æ•°',
          data: data,
          borderColor: '#5b66f6',
          backgroundColor: gradient,
          borderWidth: 2,
          fill: true,
          tension: 0.4,
          pointRadius: 0,
          pointHoverRadius: 5
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        aspectRatio: 2.5,
        interaction: {
          intersect: false,
          mode: 'index'
        },
        plugins: {
          legend: { display: false },
          tooltip: {
            backgroundColor: 'rgba(26, 31, 54, 0.9)',
            titleColor: '#fff',
            bodyColor: '#fff',
            padding: 12,
            cornerRadius: 8,
            displayColors: false
          }
        },
        scales: {
          x: {
            grid: { display: false },
            ticks: {
              maxTicksLimit: 8,
              font: { size: 11 }
            }
          },
          y: {
            min: 3100,
            max: 3300,
            grid: {
              color: 'rgba(0, 0, 0, 0.05)'
            },
            ticks: {
              font: { size: 11 }
            }
          }
        },
        animation: {
          duration: 0
        }
      }
    });

    // ä¿å­˜æœ€åä¸€ä¸ªå€¼ç”¨äºè¿ç»­æ€§
    let lastValue = data[data.length - 1];

    setInterval(() => {
      const time = new Date();
      indexChart.data.labels.push(time.getHours().toString().padStart(2, '0') + ':' + time.getMinutes().toString().padStart(2, '0'));
      indexChart.data.labels.shift();

      // åŸºäºä¸Šä¸€ä¸ªå€¼è¿›è¡Œå°å¹…æ³¢åŠ¨ï¼Œæ¨¡æ‹ŸçœŸå®è‚¡å¸‚
      const change = (Math.random() - 0.5) * 20; // -10åˆ°+10çš„æ³¢åŠ¨
      lastValue = Math.max(3100, Math.min(3300, lastValue + change)); // é™åˆ¶åœ¨3100-3300èŒƒå›´å†…

      indexChart.data.datasets[0].data.push(lastValue);
      indexChart.data.datasets[0].data.shift();
      indexChart.update('none');
    }, 2000);

    const newsList = document.getElementById("newsList");
    const newsData = [
      { time: "10:35", title: "å¤®è¡Œï¼šç»§ç»­å®æ–½ç¨³å¥çš„è´§å¸æ”¿ç­–" },
      { time: "10:12", title: "æ–°èƒ½æºæ±½è½¦é”€é‡åˆ›æ–°é«˜" },
      { time: "09:45", title: "Aè‚¡æˆäº¤é¢çªç ´ä¸‡äº¿" },
      { time: "09:30", title: "åŒ—å‘èµ„é‡‘å‡€æµå…¥è¶…50äº¿" }
    ];

    newsData.forEach(news => {
      const newsItem = document.createElement("div");
      newsItem.className = "news-item";
      newsItem.innerHTML = `
        <div class="news-time">${news.time}</div>
        <div class="news-title">${news.title}</div>
      `;
      newsList.appendChild(newsItem);
    });

    const hotStocks = document.getElementById("hotStocks");
    const stocksData = [
      { code: "002594", name: "æ¯”äºšè¿ª", change: "+4.2%", up: true },
      { code: "600519", name: "è´µå·èŒ…å°", change: "-2.1%", up: false },
      { code: "300750", name: "å®å¾·æ—¶ä»£", change: "+3.5%", up: true },
      { code: "000001", name: "å¹³å®‰é“¶è¡Œ", change: "+1.8%", up: true }
    ];

    const table = document.createElement("table");
    table.className = "table-custom";
    table.innerHTML = `
      <thead>
        <tr>
          <th>ä»£ç </th>
          <th>åç§°</th>
          <th>æ¶¨è·Œå¹…</th>
        </tr>
      </thead>
      <tbody>
        ${stocksData.map(stock => `
          <tr>
            <td>${stock.code}</td>
            <td>${stock.name}</td>
            <td><span class="${stock.up ? 'ticker-up' : 'ticker-down'}">${stock.change}</span></td>
          </tr>
        `).join('')}
      </tbody>
    `;
    hotStocks.appendChild(table);

    const forum = document.getElementById("forum");
    const users = ["è‚¡ç¥å·´è²ç‰¹", "ä»·å€¼æŠ•èµ„è€…", "çŸ­çº¿é«˜æ‰‹", "AIé‡åŒ–"];
    const messages = [
      "ä»Šå¤©å¤§ç›˜èµ°åŠ¿ä¸é”™ï¼",
      "æ–°èƒ½æºæ¿å—è¦èµ·é£äº†",
      "å»ºè®®å…³æ³¨ç§‘æŠ€é¾™å¤´",
      "çŸ­æœŸå¯èƒ½æœ‰éœ‡è¡"
    ];

    function addForumMessage() {
      const msg = document.createElement("div");
      msg.className = "forum-message";
      msg.innerHTML = `
        <span class="forum-user">${users[Math.floor(Math.random()*users.length)]}</span>
        <span class="forum-text">${messages[Math.floor(Math.random()*messages.length)]}</span>
      `;
      forum.appendChild(msg);
      if (forum.children.length > 5) forum.removeChild(forum.firstChild);
      forum.scrollTop = forum.scrollHeight;
    }

    addForumMessage();
    addForumMessage();
    setInterval(addForumMessage, 5000);
  </script>
</body>
</html>