<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>TwinMarket孪生股市</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body { overflow-x: hidden; }
    #sidebar { height: 100vh; }
    #ticker, #stock-ticker {
      white-space: nowrap;
      overflow: hidden;
    }
    #ticker span, #stock-ticker span {
      display: inline-block;
      padding-right: 50px;
      animation: ticker 20s linear infinite;
    }
    @keyframes ticker {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    #forum { height: 200px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; }
  </style>
</head>
<body>
  <!-- 顶部标题栏 -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">TwinMarket孪生股市</a>
      <div class="d-flex">
        <select id="modeSelect" class="form-select me-2" value="选择模式">
          <option value="trade.html">交易模式</option>
          <option value="agent.html">Agent管理</option>
          <option value="market-test.html">市场测试模式</option>
        </select>
        <a class="btn btn-outline-light" href="#">关于我们</a>
      </div>
    </div>
  </nav>

  <div class="container-fluid">
    <div class="row">
      <!-- 侧边栏 -->
      <div id="sidebar" class="col-2 bg-light p-3">
        <h5>我的持仓</h5>
        <ul class="list-group mb-3">
          <li class="list-group-item">AAPL 100股</li>
          <li class="list-group-item">TSLA 50股</li>
        </ul>
        <h5>快速导航</h5>
        <button class="btn btn-success w-100 mb-2" onclick="window.location.href='trade.html'">交易</button>
        <button class="btn btn-info w-100 mb-2" onclick="window.location.href='trade.html'">论坛和新闻</button>
        <button class="btn btn-primary w-100 mb-2" onclick="window.location.href='agent.html'">代理管理</button>
        <button class="btn btn-warning w-100" onclick="window.location.href='market-test.html'">分析模式</button>
      </div>

      <!-- 主内容区 -->
      <div class="col-10 p-4">
        <div class="row align-items-start">
          <div class="col-md-7">
            <h4>指数涨跌折线图</h4>
            <canvas id="indexChart" height="100"></canvas>
          </div>
          <div class="col-md-5">
            <h5>最新新闻</h5>
            <ul id="newsList" class="list-group"></ul>
          </div>
        </div>

        <div class="my-4">
          <h5>指数滚动条</h5>
          <div id="ticker"><span>上证指数 +1.2% 深证成指 +0.8% 创业板 +1.5%</span></div>
        </div>

        <div class="my-4">
          <h5>个股异动滚动条</h5>
          <div id="stock-ticker"><span>AAPL +3.2% TSLA -2.1% BABA +4.5%</span></div>
        </div>

        <div class="my-4">
          <h5>股吧论坛</h5>
          <div id="forum"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 模式选择跳转
    document.getElementById("modeSelect").addEventListener("change", function() {
      window.location.href = this.value;
    });

    // 折线图
    const ctx = document.getElementById('indexChart').getContext('2d');
    const indexChart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: Array.from({length: 20}, (_, i) => i),
        datasets: [{
          label: '指数走势',
          data: Array.from({length: 20}, () => Math.random() * 100),
          borderColor: 'blue',
          fill: false
        }]
      }
    });
    setInterval(() => {
      indexChart.data.labels.push(indexChart.data.labels.length);
      indexChart.data.labels.shift();
      indexChart.data.datasets[0].data.push(Math.random() * 100);
      indexChart.data.datasets[0].data.shift();
      indexChart.update();
    }, 2000);

    // 新闻列表动态更新
    const newsList = document.getElementById("newsList");
    const newsPool = ["美联储加息预期升温", "新能源车销量再创新高", "AI助力智能制造", "油价波动影响能源股"];
    setInterval(() => {
      const news = document.createElement("li");
      news.className = "list-group-item";
      news.textContent = newsPool[Math.floor(Math.random()*newsPool.length)];
      newsList.prepend(news);
      if (newsList.childElementCount > 5) newsList.removeChild(newsList.lastChild);
    }, 4000);

    // 股吧论坛动态发言
    const forum = document.getElementById("forum");
    const users = ["股民老张", "AI小散", "价值投资者", "趋势跟随者"];
    const messages = ["今天行情不错！", "科技股要起飞了吗？", "感觉还会震荡。", "继续看多新能源！"];
    setInterval(() => {
      const msg = document.createElement("div");
      msg.textContent = users[Math.floor(Math.random()*users.length)] + "：" + messages[Math.floor(Math.random()*messages.length)];
      forum.appendChild(msg);
      forum.scrollTop = forum.scrollHeight;
    }, 5000);
  </script>
</body>
</html>
